(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{73:function(e,t,r){Promise.resolve().then(r.bind(r,6923)),Promise.resolve().then(r.bind(r,733)),Promise.resolve().then(r.bind(r,3358)),Promise.resolve().then(r.bind(r,9824)),Promise.resolve().then(r.bind(r,9098)),Promise.resolve().then(r.bind(r,4903)),Promise.resolve().then(r.bind(r,3918))},6923:function(e,t,r){"use strict";r.r(t),r.d(t,{KeyframeList:function(){return i}});var n=r(7437),l=r(2265),s=r(9098),a=r(4655),u=r(3741),o=r(32),c=r(2234);let i=()=>{let e=(0,l.useRef)(null),t=(0,a.T)(e),r=(0,u.x)(e),{tracks:i,duration:d}=(0,c.R)(o.yq);return(0,l.useEffect)(()=>{e.current&&(e.current.scrollLeft=t)},[t]),(0,l.useEffect)(()=>{e.current&&(e.current.scrollTop=r)},[r]),(0,n.jsx)("div",{ref:e,className:"px-4 min-w-0 overflow-auto","data-testid":"keyframe-list",children:i.map((e,t)=>(0,n.jsx)(s.Segment,{track:e,color:o.rY[t%o.rY.length],duration:d},"".concat(e,"_").concat(t)))})}},733:function(e,t,r){"use strict";r.r(t),r.d(t,{PlayControls:function(){return c}});var n=r(7437),l=r(32),s=r(2265),a=r(2234);let u=["Backspace","Delete","ArrowUp","ArrowDown","Enter","Escape",".","-"],o=e=>{let t=Number(e);return!isNaN(t)&&t>=0},c=()=>{let{duration:e,time:t}=(0,a.R)(l.yq),r=(0,s.useCallback)(e=>{l.yq.time=e},[]),c=(0,s.useCallback)(e=>{l.yq.duration=e},[]),[i,d]=(0,s.useState)(t.toString()),[f,m]=(0,s.useState)(e.toString()),h=(0,s.useRef)(!1),x=(0,s.useRef)(null),b=(0,s.useRef)(t.toString()),p=(0,s.useRef)(t.toString()),v=(0,s.useRef)(!1),g=(0,s.useRef)(null),y=(0,s.useRef)(t.toString()),w=(0,s.useRef)(t.toString()),k=(0,s.useRef)(!1),j=(e,t)=>{let n=e.target.value.replace(/^0+(?=\d)/,""),l=parseFloat(n);l<0&&(n="0"),l=Math.round(parseFloat(n));let s=t?m:d,a=t?c:r;if(""===n){s("");return}let u=t?y:b;""===n||o(n)?(s(l.toString()),10===Math.abs(l-Number(u.current))&&(a(Math.round(l)),e.target.select()),u.current=n.toString()):s(u.current)},E=(0,s.useCallback)((n,s)=>{let a=s?f:i,u=s?r:c;if(!h.current){let n=(0,l.ME)(Number(a));s?(m((n=Math.max(100,Math.min(6e3,n))).toString()),c(n),n<t&&(u(n),d(n.toString()))):(d((n=Math.min(n,e)).toString()),r(n)),(s?y:b).current=n.toString()}h.current=!1},[i,r,f,c,t,e]),N=(0,s.useCallback)((e,t)=>{t?w.current=e.target.value:p.current=e.target.value,e.target.select()},[]),R=(0,s.useCallback)(e=>{var t,n;h.current=!0,e?(m(w.current),c(Number(w.current)),null===(t=g.current)||void 0===t||t.blur()):(d(p.current),r(Number(p.current)),null===(n=x.current)||void 0===n||n.blur())},[r,c]),M=(0,s.useCallback)((e,t)=>{let n=t?g:x,l=t?m:d,s=t?c:r,a=t?f:i;if(e.key>="0"&&e.key<="9"||e.key>="Numpad0"&&e.key<="Numpad9"||u.includes(e.key)){if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();let r="ArrowUp"===e.key?10:-10,n=Math.max(Number(a)+r,0);l(n.toString()),s(n),(t?k:v).current=!0}else if("Enter"===e.key){var o;null===(o=n.current)||void 0===o||o.blur()}else"Escape"===e.key&&R(t);return}e.preventDefault()},[i,f,r,c,R]);return(0,s.useEffect)(()=>{v.current&&x.current&&(x.current.select(),v.current=!1)},[i]),(0,s.useEffect)(()=>{t!==Number(i)&&(d(t.toString()),r(t))},[t]),(0,s.useEffect)(()=>{k.current&&g.current&&(g.current.select(),k.current=!1)},[f]),(0,n.jsxs)("div",{className:"flex flex-wrap items-center text-white justify-between border-b border-r border-solid border-gray-700 px-2 text-xs","data-testid":"play-controls",children:[(0,n.jsxs)("fieldset",{className:"flex gap-1",children:["Current",(0,n.jsx)("input",{ref:x,className:"bg-gray-700 px-1 rounded","data-testid":"current-time-input",min:0,max:e,step:10,type:"number",value:i,onInput:e=>j(e,!1),onBlur:e=>E(e,!1),onFocus:e=>N(e,!1),onKeyDown:e=>M(e,!1)})]}),"-",(0,n.jsxs)("fieldset",{className:"flex gap-1",children:[(0,n.jsx)("input",{ref:g,className:"bg-gray-700 px-1 rounded","data-testid":"duration-input",min:100,max:6e3,step:10,type:"number",value:f,onInput:e=>j(e,!0),onBlur:e=>E(e,!0),onFocus:e=>N(e,!0),onKeyDown:e=>M(e,!0)}),"Duration"]})]})}},3358:function(e,t,r){"use strict";r.r(t),r.d(t,{Playhead:function(){return u}});var n=r(7437),l=r(32),s=r(2265),a=r(2234);let u=()=>{let[e,t]=(0,s.useState)(!1),{scrollX:r,duration:u,time:o}=(0,a.R)(l.yq),c=(0,s.useRef)(0),i=(0,s.useCallback)(e=>{let t=Math.min(Math.max(e,0),u);l.yq.time=t},[u]),d=(0,s.useCallback)(()=>{t(!1)},[]),f=(0,s.useCallback)(t=>{if(e){let e=Date.now();if(e-c.current>16){let n=Math.max(316,Math.min(t.clientX+r,316+u));i((0,l.ME)(n-316)),c.current=e}}},[e,u,r,i]);(0,s.useEffect)(()=>(e&&(document.addEventListener("mouseup",d),document.addEventListener("mousemove",f)),()=>{document.removeEventListener("mouseup",d),document.removeEventListener("mousemove",f)}),[e,d,f]);let m=o-r;return(0,n.jsx)("div",{className:"absolute  h-full border-l-2 border-solid border-yellow-600 z-10","data-testid":"playhead",style:{left:"".concat(316,"px"),cursor:"ew-resize",transform:"translateX(calc(".concat(m,"px - 50%))"),visibility:m<-16?"hidden":"visible"},onMouseDown:e=>{t(!0),e.preventDefault()},children:(0,n.jsx)("div",{className:"absolute border-solid border-[5px] border-transparent border-t-yellow-600 -translate-x-1.5"})})}},9824:function(e,t,r){"use strict";r.r(t),r.d(t,{Ruler:function(){return o}});var n=r(7437),l=r(4655),s=r(32),a=r(2265),u=r(2234);let o=()=>{let e=(0,a.useRef)(null),t=(0,l.T)(e),{duration:r,positions:o}=(0,u.R)(s.yq),c=(0,a.useCallback)(t=>{if(e.current){let n=e.current.getBoundingClientRect(),l=e.current.scrollLeft,a=Math.min(Math.max(t.clientX-n.left+l-16,0),r);s.yq.time=(0,s.ME)(a)}},[r]);return(0,a.useEffect)(()=>{e.current&&(e.current.scrollLeft=t)},[t]),(0,n.jsx)("div",{ref:e,className:"cursor-pointer overflow-auto relative py-2 min-w-0 border-b border-solid border-gray-700 overflow-x-auto overflow-y-hidden",style:{paddingLeft:16,paddingRight:16},"data-testid":"ruler",children:(0,n.jsx)("div",{onClick:c,className:"h-6 rounded-md bg-white/25","data-testid":"ruler-bar",style:{width:"".concat(r,"px")},children:o.map((e,t)=>t%5==0&&t?(0,n.jsxs)("div",{className:"absolute flex flex-col justify-between text-center ml-[-0.5px] text-[7px] h-7 text-[#fafafa] w-[1px]",style:{left:"".concat(e+.75,"px"),width:30},children:[(0,n.jsxs)("p",{children:[" ",e]}),(0,n.jsx)("p",{children:"|"})]},e):null)})})}},9098:function(e,t,r){"use strict";r.r(t),r.d(t,{Segment:function(){return o}});var n=r(7437),l=r(32),s=r(2265),a=r(2234);let u=(e,t)=>{let r=[],n=t/2;for(let l=0;l<e;l+=2){let s;s=l<20?l/20*n:l>e-20?(e-l)/20*n:Math.max(1,Math.min(t,n+(Math.random()-.5)*8)),r.push({x:l,height:Math.max(1,Math.round(s))}),n=s}return r},o=e=>{let{duration:t,color:r,track:o}=e,{positions:c,selectTrack:i}=(0,a.R)(l.yq),d=(0,s.useMemo)(()=>u(t,22),[t]),f=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=f.current;if(!e)return;let t=e.getContext("2d");t&&(t.clearRect(0,0,e.width,e.height),t.fillStyle=r,d.forEach(e=>{t.globalAlpha=.7,t.fillRect(e.x,(24-e.height)/2,1,e.height)}),c.forEach((e,r)=>{t.globalAlpha=1,r%5==0&&r&&t.fillRect(e-.25,0,.5,24)}))},[d,r,c]),(0,n.jsx)("div",{className:"py-2","data-testid":"segment",style:{width:"".concat(t,"px")},children:(0,n.jsx)("div",{className:"relative h-6 rounded-md flex items-center ".concat(i===o?"bg-white/30":"bg-white/10"),children:(0,n.jsx)("canvas",{ref:f,width:t,height:24,className:"absolute top-0 left-0"})})})}},4903:function(e,t,r){"use strict";r.r(t),r.d(t,{Timeline:function(){return c}});var n=r(7437),l=r(3358),s=r(9824),a=r(3918),u=r(6923),o=r(733);let c=()=>(0,n.jsxs)("div",{className:"relative h-auto w-full grid grid-cols-[300px_1fr] grid-rows-[40px_1fr]  bg-[#222222] border-t-2 border-solid border-gray-700 overflow-hidden","data-testid":"timeline",children:[(0,n.jsx)(o.PlayControls,{}),(0,n.jsx)(s.Ruler,{}),(0,n.jsx)(a.TrackList,{}),(0,n.jsx)(u.KeyframeList,{}),(0,n.jsx)(l.Playhead,{})]})},3918:function(e,t,r){"use strict";r.r(t),r.d(t,{TrackList:function(){return o}});var n=r(7437),l=r(3741),s=r(32),a=r(2265),u=r(2234);let o=()=>{let e=(0,a.useRef)(null),t=(0,l.x)(e),{tracks:r,selectTrack:o}=(0,u.R)(s.yq);return(0,a.useEffect)(()=>{e.current&&(e.current.scrollTop=t)},[t]),(0,n.jsx)("div",{ref:e,className:"grid grid-flow-row auto-rows-[40px] border-r border-solid border-r-gray-700 text-white  overflow-auto","data-testid":"track-list",children:r.map((e,t)=>(0,n.jsxs)("div",{onClick:()=>s.yq.selectTrack=e,className:"cursor-pointer my-2 pl-2 pr-0 flex justify-between items-center ".concat(o===e?"bg-white/30":""),style:{color:s.rY[t%s.rY.length]},children:[(0,n.jsxs)("div",{children:["Track ",e]}),(0,n.jsx)("div",{children:(0,n.jsx)("svg",{width:16,height:16,fill:"white","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:(0,n.jsx)("path",{d:"M15.5 7.5v1H.5v-1z"})})})]},"".concat(e,"_").concat(t)))})}},4655:function(e,t,r){"use strict";r.d(t,{T:function(){return a}});var n=r(2265),l=r(2234),s=r(32);let a=e=>{let t=(0,l.R)(s.yq);return(0,n.useEffect)(()=>{let t=()=>{e.current&&(s.yq.scrollX=e.current.scrollLeft)},r=e.current;return r&&r.addEventListener("scroll",t),()=>{r&&r.removeEventListener("scroll",t)}},[e]),t.scrollX}},3741:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var n=r(2265),l=r(2234),s=r(32);let a=e=>{let t=(0,l.R)(s.yq);return(0,n.useEffect)(()=>{let t=()=>{e.current&&(s.yq.scrollY=e.current.scrollTop)},r=e.current;return r&&r.addEventListener("scroll",t),()=>{r&&r.removeEventListener("scroll",t)}},[e]),t.scrollY}},32:function(e,t,r){"use strict";r.d(t,{ME:function(){return l},rY:function(){return s},yq:function(){return n}});let n=(0,r(5708).sj)({scrollX:0,scrollY:0,time:400,duration:800,selectTrack:"",tracks:Array.from({length:26},(e,t)=>String.fromCharCode(65+t)),get positions(){return Array.from({length:Math.floor((this.duration+100)/100)},(e,t)=>100*t)}});function l(e){return 10*Math.round(e/10)}let s=["#9f58e0","#17b3fb","#f48f27","#fc44b2","#dcdc24","#1aea9d","#fafafa"]}},function(e){e.O(0,[234,971,117,744],function(){return e(e.s=73)}),_N_E=e.O()}]);